var app=angular.module("starter",["ionic","starter.controllers"]).run(function($ionicPlatform){$ionicPlatform.ready(function(){window.cordova&&window.cordova.plugins.Keyboard&&(cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),cordova.plugins.Keyboard.disableScroll(!0)),window.StatusBar&&StatusBar.styleDefault()})}).config(["$stateProvider","$urlRouterProvider","$ionicConfigProvider","$httpProvider",function($stateProvider,$urlRouterProvider,$ionicConfigProvider,$httpProvider){$ionicConfigProvider.platform.ios.tabs.style("standard"),$ionicConfigProvider.platform.ios.tabs.position("bottom"),$ionicConfigProvider.platform.android.tabs.style("standard"),$ionicConfigProvider.platform.android.tabs.position("bottom"),$ionicConfigProvider.platform.ios.navBar.alignTitle("center"),$ionicConfigProvider.platform.android.navBar.alignTitle("center"),$ionicConfigProvider.platform.ios.backButton.previousTitleText("").icon("ion-ios-arrow-thin-left"),$ionicConfigProvider.platform.android.backButton.previousTitleText("").icon("ion-android-arrow-back"),$ionicConfigProvider.platform.ios.views.transition("ios"),$ionicConfigProvider.platform.android.views.transition("android"),$stateProvider.state("login",{url:"/login","abstract":!0,template:"<ion-nav-view></ion-nav-view>"}).state("login.signin",{url:"/signin",templateUrl:"views/login_signin.html",controller:"loginCtrl"}).state("login.forget",{url:"/forget",templateUrl:"views/login_forget.html",controller:"loginCtrl"}).state("login.signup",{url:"/signup",templateUrl:"views/login_signup.html",controller:"loginCtrl"}).state("login.changepassword",{url:"/changepassword/:account",templateUrl:"views/login_changepassword.html",controller:"navsCtrl"}).state("app",{url:"/app","abstract":!0,templateUrl:"views/tabs.html"}).state("app.bookshelf",{url:"/bookshelf",templateUrl:"views/bookshelf/bookshelf-index.html"}).state("app.bookstore",{url:"/bookstore",templateUrl:"views/bookstore/bookstore.html"}).state("app.self",{url:"/self",templateUrl:"views/self/self-index.html"}),$urlRouterProvider.otherwise("/app/bookshelf")}]);app.factory("myHttpInterceptor",["$q","$injector",function($q,$injector){return{request:function(config){var $location=(config.url,$injector.get("$location"));$location.absUrl();return config},requestError:function(rejection){return $q.reject(rejection)},response:function(response){return response},responseError:function(rejection){var $state=$injector.get("$state");if(401===rejection.status)$state.go("login.signin");else if(500===rejection.status){var data=rejection.data;if(data.error)try{swal("系统错误")}catch(e){}else $state.go("error.500")}else if(404===rejection.status)try{swal("页面不存在","您要访问的页面不存在")}catch(e){}else $state.go("login.signin");return $q.reject(rejection)}}}]);